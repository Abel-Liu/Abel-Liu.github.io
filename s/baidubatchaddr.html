<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>批量地址</title>
    <style type="text/css">
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
        }

        #l-map {
            height: 600px;
            width: 100%;
        }

        #r-result {
            width: 100%;
            font-size: 14px;
            line-height: 20px;
        }
    </style>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=qzympt9BFcyNgVygpCxORpsO8GlnXGfE"></script>
</head>
<body>
    <div id="l-map"></div>
    <div id="r-result">
        <input id="txtCity" type="text" value="北京市" />
        <input type="button" value="批量地址解析" onclick="go()" />
        <div id="result"></div>
    </div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("l-map");
    map.centerAndZoom(new BMap.Point(116.395645, 39.928216), 12);
    map.enableScrollWheelZoom(true);
    var index = 0;
    var myGeo = new BMap.Geocoder();
    var adds = [
        "北京市朝阳区朝阳北路101号五层美图体验店",
        "北京市海淀区中关村18号科贸大厦一层",
        "北京市海淀区城乡贸易中心五层",
        "北京市西城区西单北大街甲131号西单大悦城五层",
        "北京市西城区西单北大街华威大厦4层手机卖场",
        "北京市朝阳区安慧里二区11号楼邮局二层",
        "北京市海淀区中关村18号科贸大厦一层7号",
        "北京市西城区西单北大街59号西单明珠商场地下一层东北区",
        "北京市大兴区郁花园三里15.17号楼一层 物美大卖场一层底商",
        "北京市昌平区昌平镇西环路26号楼一层",
        "北京市朝阳区建外大街甲5号贵友大厦一层",
        "北京市朝阳区朝阳北路管庄路口长楹天街购物中心B1层中国移动",
        "北京市东城区王府井大街200号工美大厦一层",
        "北京市朝阳区建国门外大街22号赛特购物中心一层",
        "北京市西城区堂子胡同9号西单新一代商城二层153号",
        "北京市海淀区中关村四通大厦一层",
        "北京市朝阳区安慧里二区四号楼一层西侧",
        "北京市海淀区复兴路23号23-12，中国电信手机广场",
        "北京市朝阳区安慧里二期4号楼一层",
        "北京市海淀区中关村东路118号苏宁通讯",
        "石景山区石景山路31号胜景国际大厦1层通讯",
        "北京市朝阳区立水桥南苏宁",
        "通州区梨园淘宝城旁苏宁电器",
        "北京市昌平区回龙观西大街北店时代广场苏宁",
        "朝阳区慈云寺北里118号苏宁生活广场",
        "朝阳区东八里庄5号昆泰大厦苏宁一层，",
        "北京市朝阳区朝阳路高井69号财满街大厦二层苏宁易购",
        "海淀区北三环中路18号城建大厦一层",
        "北京北三环东路33号安贞桥东苏宁易购",
        "北京市海淀区北洼路4号苏宁易购",
        "北京市朝阳区星火西路19号 苏宁电器",
        "北京市朝阳区西大望路15号院外企大厦2层苏宁易购",
        "‍北京市‍通州区‍新华大街171‍号‍怡佳家园‍底商‍苏宁‍电器‍一层‍通讯‍部‍",
        "北京市海淀区西四环北路117号金四季购物中心二层苏宁手机部",
        "北京市东城区安定路20号，苏宁易购安贞店"
    ];

    function go() {
        var add = adds[index];
        geocodeSearch(add);
        index++;
    }

    function geocodeSearch(add) {
        if (index < adds.length) {
            setTimeout(window.go, 400);
        }
        myGeo.getPoint(add, function (point) {
            if (point) {
                //document.getElementById("result").innerHTML += index + "、" + add + ":" + point.lng + "," + point.lat + "</br>";
                var address = new BMap.Point(point.lng, point.lat);
                addMarker(address, new BMap.Label(index + ":" + add, { offset: new BMap.Size(20, -10) }));
            }
        }, $("#txtCity").val());
    }

    function addMarker(point, label) {
        var marker = new BMap.Marker(point);
        map.addOverlay(marker);
        marker.setLabel(label);
    }
</script>

